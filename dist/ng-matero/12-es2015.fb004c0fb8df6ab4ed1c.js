(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{xUSb:function(e,s,n){"use strict";n.r(s),n.d(s,"PermissionsModule",function(){return j});var i=n("PCNd"),t=n("tyNb"),o=n("XNiG"),c=n("1G5W"),r=n("fXoL"),a=n("qSrz"),m=n("tgey"),u=n("jaxi"),l=n("3Pt+"),d=n("ofXK");let p=(()=>{class e{constructor(e,s){this.rolesSrv=e,this.permissionsSrv=s,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new o.a}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe(Object(c.a)(this._destroy$)).subscribe(e=>{console.log(e)}),this.permissionsSrv.permissions$.pipe(Object(c.a)(this._destroy$)).subscribe(e=>{console.log(e)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}return e.\u0275fac=function(s){return new(s||e)(r.Ub(a.e),r.Ub(a.d))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-permissions-role-switching"]],decls:24,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,s){1&e&&(r.Vb(0,"page-header"),r.ac(1,"p"),r.Uc(2," The permissions management is powered by "),r.ac(3,"a",0),r.ac(4,"code"),r.Uc(5,"ngx-permissions"),r.Zb(),r.Zb(),r.Uc(6,".\n"),r.Zb(),r.ac(7,"mat-button-toggle-group",1),r.ic("ngModelChange",function(e){return s.currentRole=e})("change",function(){return s.onPermissionChange()}),r.ac(8,"mat-button-toggle",2),r.Uc(9,"ADMIN"),r.Zb(),r.ac(10,"mat-button-toggle",3),r.Uc(11,"MANAGER"),r.Zb(),r.ac(12,"mat-button-toggle",4),r.Uc(13,"GUEST"),r.Zb(),r.Zb(),r.ac(14,"p"),r.Uc(15," Your current role: "),r.ac(16,"code"),r.Uc(17),r.nc(18,"json"),r.Zb(),r.Zb(),r.ac(19,"p"),r.Uc(20," Your current permissions: "),r.ac(21,"code"),r.Uc(22),r.nc(23,"json"),r.Zb(),r.Zb()),2&e&&(r.Hb(7),r.vc("ngModel",s.currentRole),r.Hb(10),r.Vc(r.oc(18,3,s.currentRole)),r.Hb(5),r.Vc(r.oc(23,5,s.currentPermissions)))},directives:[m.a,u.b,l.r,l.u,u.a],pipes:[d.i],styles:[""]}),e})(),b=(()=>{class e{constructor(e,s,n){this.rolesSrv=e,this.permissionsSrv=s,this.router=n,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}}return e.\u0275fac=function(s){return new(s||e)(r.Ub(a.e),r.Ub(a.d),r.Ub(t.f))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-permissions-route-guard"]],decls:20,vars:7,consts:[[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,s){1&e&&(r.Vb(0,"page-header"),r.ac(1,"p"),r.Uc(2," The route will be redirected to dashboard after change permission.\n"),r.Zb(),r.ac(3,"mat-button-toggle-group",0),r.ic("ngModelChange",function(e){return s.currentRole=e})("change",function(){return s.onPermissionChange()}),r.ac(4,"mat-button-toggle",1),r.Uc(5,"ADMIN"),r.Zb(),r.ac(6,"mat-button-toggle",2),r.Uc(7,"MANAGER"),r.Zb(),r.ac(8,"mat-button-toggle",3),r.Uc(9,"GUEST"),r.Zb(),r.Zb(),r.ac(10,"p"),r.Uc(11," Your current role: "),r.ac(12,"code"),r.Uc(13),r.nc(14,"json"),r.Zb(),r.Zb(),r.ac(15,"p"),r.Uc(16," Your current permissions: "),r.ac(17,"code"),r.Uc(18),r.nc(19,"json"),r.Zb(),r.Zb()),2&e&&(r.Hb(3),r.vc("ngModel",s.currentRole),r.Hb(10),r.Vc(r.oc(14,3,s.currentRole)),r.Hb(5),r.Vc(r.oc(19,5,s.currentPermissions)))},directives:[m.a,u.b,l.r,l.u,u.a],pipes:[d.i],styles:[""]}),e})();var g=n("6Nlu");function h(e,s){1&e&&(r.ac(0,"p",11),r.Uc(1," I should see it only admin "),r.Zb())}function P(e,s){1&e&&(r.ac(0,"p",11),r.Uc(1," Usage on both only and except I should see it only admin "),r.Zb())}function v(e,s){1&e&&(r.ac(0,"p",12),r.Uc(1,"I will see it only guest"),r.Zb())}function U(e,s){1&e&&(r.ac(0,"p",13),r.Uc(1,"I will see it except adminnnnn"),r.Zb())}function y(e,s){1&e&&(r.ac(0,"p",14),r.Uc(1,"I should see it except admin"),r.Zb())}function f(e,s){1&e&&(r.ac(0,"div"),r.Uc(1," Testing template\n"),r.Zb())}function x(e,s){1&e&&(r.ac(0,"div"),r.Uc(1," Testing template\n"),r.Zb())}function Z(e,s){1&e&&(r.ac(0,"p",15),r.Uc(1,"else block"),r.Zb())}function A(e,s){1&e&&(r.ac(0,"p",16),r.Uc(1,"then block"),r.Zb())}function S(e,s){1&e&&(r.ac(0,"button"),r.Uc(1," This should be visible to admin or superadmin "),r.Zb())}function R(e,s){1&e&&(r.ac(0,"button"),r.Uc(1,"WTF"),r.Zb())}const E=function(){return["admin"]},O=function(){return["guest"]},T=function(){return["adminnnnn"]},w=function(){return[]},M=[{path:"role-switching",component:p},{path:"route-guard",component:b,canActivate:[a.b],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:(()=>{class e{constructor(e){this.permissionsSrv=e,this.comparedPermission=["guest"]}ngOnInit(){}getPermissions(){return Object.keys(this.permissionsSrv.getPermissions())}addPermission(){this.permissionsSrv.addPermission("admin",()=>new Promise((e,s)=>{setTimeout(()=>e(!0),2e3)}))}removePermission(){this.permissionsSrv.removePermission("admin")}unAuthorized(){console.log("unAuthorized")}authorized(){console.log("authorizes")}changeToAdmin(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}changeToAnotherPermission(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}changeToGuest(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}}return e.\u0275fac=function(s){return new(s||e)(r.Ub(a.d))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-permissions-test"]],decls:39,vars:28,consts:[["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept","permissionsAuthorized","permissionsUnauthorized"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],["a",""],["b",""],[4,"ngxPermissionsOnly"],[1,"bg-green-500","text-white"],[1,"bg-purple-500","text-white"],[1,"bg-orange-500","text-white"],[1,"bg-indigo-500","text-white"],[1,"bg-gray-900","text-white"],[1,"bg-gray-300"]],template:function(e,s){if(1&e&&(r.Vb(0,"page-header"),r.ac(1,"mtx-alert",0),r.Uc(2,"The permissions check will delay 2s."),r.Zb(),r.ac(3,"p"),r.ac(4,"button",1),r.ic("click",function(){return s.addPermission()}),r.Uc(5,"Add Permission [ admin ]"),r.Zb(),r.ac(6,"button",1),r.ic("click",function(){return s.removePermission()}),r.Uc(7,"Remove Permission [ admin ]"),r.Zb(),r.Zb(),r.Sc(8,h,2,0,"ng-template",2),r.Sc(9,P,2,0,"ng-template",3),r.Sc(10,v,2,0,"ng-template",2),r.Sc(11,U,2,0,"ng-template",4),r.ic("permissionsAuthorized",function(){return s.authorized()})("permissionsUnauthorized",function(){return s.unAuthorized()}),r.Sc(12,y,2,0,"ng-template",5),r.Sc(13,f,2,0,"div",6),r.Sc(14,x,2,0,"div",7),r.Sc(15,Z,2,0,"ng-template",null,8,r.Tc),r.Sc(17,A,2,0,"ng-template",null,9,r.Tc),r.ac(19,"p"),r.Uc(20," Compared permission: "),r.ac(21,"code"),r.Uc(22),r.nc(23,"json"),r.Zb(),r.Zb(),r.ac(24,"div"),r.ac(25,"button",1),r.ic("click",function(){return s.changeToAdmin()}),r.Uc(26,"Change To Admin Permission"),r.Zb(),r.ac(27,"button",1),r.ic("click",function(){return s.changeToAnotherPermission()}),r.Uc(28,"Change To Awesome Permission"),r.Zb(),r.ac(29,"button",1),r.ic("click",function(){return s.changeToGuest()}),r.Uc(30,"Change To Guest Permission"),r.Zb(),r.Zb(),r.ac(31,"div"),r.Sc(32,S,2,0,"button",10),r.Sc(33,R,2,0,"button",10),r.Zb(),r.ac(34,"p"),r.Uc(35," Your current permissions: "),r.ac(36,"code"),r.Uc(37),r.nc(38,"json"),r.Zb(),r.Zb()),2&e){const e=r.Gc(16),n=r.Gc(18);r.Hb(8),r.vc("ngxPermissionsOnly",r.yc(20,E)),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(21,E))("ngxPermissionsExcept","hhhhh"),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(22,O)),r.Hb(1),r.vc("ngxPermissionsExcept",r.yc(23,T)),r.Hb(1),r.vc("ngxPermissionsExcept",r.yc(24,E)),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(25,E))("ngxPermissionsOnlyElse",e)("ngxPermissionsOnlyThen",n),r.Hb(1),r.vc("ngxPermissionsExcept",r.yc(26,E))("ngxPermissionsExceptElse",e)("ngxPermissionsExceptThen",n),r.Hb(8),r.Vc(r.oc(23,16,s.comparedPermission)),r.Hb(10),r.vc("ngxPermissionsOnly",s.comparedPermission),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(27,w)),r.Hb(4),r.Vc(r.oc(38,18,s.getPermissions()))}},directives:[m.a,g.a,a.a],pipes:[d.i],styles:[""]}),e})(),canActivate:[a.b],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}];let G=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({imports:[[t.j.forChild(M)],t.j]}),e})(),j=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({imports:[[i.a,G]]}),e})()}}]);
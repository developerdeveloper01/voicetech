(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{Lt7c:function(e,o,t){"use strict";t.r(o),t.d(o,"SubordinateModule",function(){return V});var a=t("PCNd"),l=t("tyNb"),i=t("xdv0"),n=t("fXoL"),r=t("0IaG"),c=t("r0g6"),d=t("tgey"),s=t("hGDI"),b=t("bTqV"),u=t("NFeN");function m(e,o){if(1&e){const e=n.bc();n.ac(0,"button",5),n.ic("click",function(){return n.Jc(e),n.mc().openAddDstNumber()}),n.ac(1,"mat-icon"),n.Uc(2,"add"),n.Zb(),n.Uc(3,"Add Agent "),n.Zb()}}const h=function(){return[50,100,200,500]};let p=(()=>{class e{constructor(e,o,t,a){this.dialog=e,this.dialogx=o,this.userService=t,this.cdr=a,this.columns=[],this.list=[],this.total=0,this.multiSelectable=!0,this.rowSelectable=!0,this.hideRowSelectionCheckbox=!1,this.showToolbar=!0,this.columnHideable=!0,this.columnMovable=!0,this.rowHover=!0,this.rowStriped=!0,this.showPaginator=!0,this.expandable=!0,this.columnResizable=!1}ngOnInit(){}changeSelect(e){console.log(e)}changeSort(e){console.log(e)}}return e.\u0275fac=function(o){return new(o||e)(n.Ub(r.c),n.Ub(c.a),n.Ub(i.a),n.Ub(n.h))},e.\u0275cmp=n.Ob({type:e,selectors:[["app-agent"]],decls:6,vars:21,consts:[[1,"bg-blue-600"],[1,"row"],[1,"col-lg-12"],[1,"mat-elevation-z8",3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","toolbarTemplate","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","pageSize","sortChange","selectionChange"],["toolbarTpl",""],["mat-stroked-button","","color","primary",3,"click"]],template:function(e,o){if(1&e&&(n.Vb(0,"page-header",0),n.ac(1,"div",1),n.ac(2,"div",2),n.ac(3,"mtx-grid",3),n.ic("sortChange",function(e){return o.changeSort(e)})("selectionChange",function(e){return o.changeSelect(e)}),n.Zb(),n.Sc(4,m,4,0,"ng-template",null,4,n.Tc),n.Zb(),n.Zb()),2&e){const e=n.Gc(5);n.Hb(3),n.vc("data",o.list)("columns",o.columns)("loading",o.isLoading)("columnResizable",o.columnResizable)("multiSelectable",o.multiSelectable)("rowSelectable",o.rowSelectable)("hideRowSelectionCheckbox",o.hideRowSelectionCheckbox)("rowHover",o.rowHover)("rowStriped",o.rowStriped)("showToolbar",o.showToolbar)("toolbarTitle","Agent")("toolbarTemplate",e)("columnHideable",o.columnHideable)("columnMovable",o.columnMovable)("expandable",o.expandable)("pageOnFront",o.showPaginator)("showPaginator",o.showPaginator)("pageSizeOptions",n.yc(20,h))("pageIndex",0)("pageSize",50)}},directives:[d.a,s.a,b.b,u.a],styles:[""],changeDetection:0}),e})();var f=t("3Pt+"),g=t("dNgK"),v=t("XiUz"),w=t("kmnG"),S=t("qFsG"),x=t("ofXK"),Z=t("d3UM"),C=t("bSwM"),y=t("FKr1"),U=t("sYmb");function H(e,o){if(1&e){const e=n.bc();n.ac(0,"button",5),n.ic("click",function(){return n.Jc(e),n.mc().openSubordinate()}),n.ac(1,"mat-icon"),n.Uc(2,"add"),n.Zb(),n.Uc(3,"Add Subordinate "),n.Zb()}}const k=function(){return[50,100,200,500]};function T(e,o){1&e&&(n.ac(0,"mat-error"),n.Uc(1),n.nc(2,"translate"),n.Zb()),2&e&&(n.Hb(1),n.Wc(" ",n.oc(2,1,"validations.required")," "))}function R(e,o){1&e&&(n.ac(0,"mat-error"),n.Uc(1),n.nc(2,"translate"),n.Zb()),2&e&&(n.Hb(1),n.Wc(" ",n.oc(2,1,"validations.required")," "))}function z(e,o){1&e&&(n.ac(0,"mat-error"),n.Uc(1),n.nc(2,"translate"),n.Zb()),2&e&&(n.Hb(1),n.Wc(" ",n.oc(2,1,"validations.required")," "))}function I(e,o){1&e&&(n.ac(0,"mat-error"),n.Uc(1),n.nc(2,"translate"),n.Zb()),2&e&&(n.Hb(1),n.Wc(" ",n.oc(2,1,"validations.required")," "))}function O(e,o){if(1&e&&(n.ac(0,"mat-option",16),n.Uc(1),n.Zb()),2&e){const e=o.$implicit;n.vc("value",e._id),n.Hb(1),n.Wc(" ",null==e?null:e.name," ")}}function q(e,o){1&e&&(n.ac(0,"mat-error"),n.Uc(1),n.nc(2,"translate"),n.Zb()),2&e&&(n.Hb(1),n.Wc(" ",n.oc(2,1,"validations.required")," "))}let M=(()=>{class e{constructor(e,o,t,a){this.dialog=e,this.dialogx=o,this.userService=t,this.cdr=a,this.columns=[],this.list=[],this.total=0,this.multiSelectable=!0,this.rowSelectable=!0,this.hideRowSelectionCheckbox=!1,this.showToolbar=!0,this.columnHideable=!0,this.columnMovable=!0,this.rowHover=!0,this.rowStriped=!0,this.showPaginator=!0,this.expandable=!0,this.columnResizable=!1}ngOnInit(){this.getallstaff(),this.columns=[{header:"Avatar",field:"staffimg",type:"image"},{header:"Name",field:"name",formatter:e=>`${e.firstname} ${e.lastname} `},{header:"Email",sortable:!0,field:"email"},{header:"Mobile",sortable:!0,field:"mobile"},{header:"Role",field:"role.name",formatter:e=>{var o;return`<span class="label">${null===(o=null==e?void 0:e.role)||void 0===o?void 0:o.name}</span>`}},{header:"Added By",field:"added_by.firstname",formatter:e=>{var o;return`<span (click)="viewadmin()" class="admin-dy-class">${null===(o=null==e?void 0:e.added_by)||void 0===o?void 0:o.firstname}</span>`}},{header:"Approved",field:"approvedstatus",type:"tag",tag:{true:{text:"Yes",color:"red-100"},false:{text:"No",color:"green-100"}}},{header:"Actions",field:"action",minWidth:120,width:"120px",pinned:"right",type:"button",buttons:[{type:"icon",icon:"edit",tooltip:"edit",click:e=>this.edit(e)},{color:"warn",icon:"delete",text:"delete",tooltip:"delete",pop:!0,popTitle:"Confirm Delete",popCloseText:"Cancel",popOkText:"Delete",click:e=>this.delete(e)}]}]}edit(e){this.dialog.open(N,{width:"500px",data:{record:e}}).afterClosed().subscribe(()=>{console.log("The dialog was closed"),this.getallstaff()})}delete(e){this.userService.deletestaff(e._id).subscribe(o=>{console.log("%cips.component.ts line:248 response","color: #26bfa5;",o),this.isLoading=!1,this.getallstaff(),this.cdr.detectChanges(),this.dialogx.alert(`You have deleted ${e.firstname} ${e.lastname}!`)},e=>{console.log("%cerror ips.component.ts line:254 ","color: red; display: block; width: 100%;",e)})}changeSelect(e){console.log(e)}changeSort(e){console.log(e)}openSubordinate(){this.dialog.open(N,{width:"500px"}).afterClosed().subscribe(()=>{console.log("Dailog Closed")})}getallstaff(){this.userService.viewadminstaff().subscribe(e=>{console.log("%cstaff.component.ts line:238 response","color: white; background-color: #007acc;",e),this.list=e.data,this.isLoading=!1,this.cdr.detectChanges()},e=>{console.log(e)})}}return e.\u0275fac=function(o){return new(o||e)(n.Ub(r.c),n.Ub(c.a),n.Ub(i.a),n.Ub(n.h))},e.\u0275cmp=n.Ob({type:e,selectors:[["app-subordinates"]],decls:6,vars:21,consts:[[1,"bg-blue-600"],[1,"row"],[1,"col-lg-12"],[1,"mat-elevation-z8",3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","toolbarTemplate","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","pageSize","sortChange","selectionChange"],["toolbarTpl",""],["mat-stroked-button","","color","primary",3,"click"]],template:function(e,o){if(1&e&&(n.Vb(0,"page-header",0),n.ac(1,"div",1),n.ac(2,"div",2),n.ac(3,"mtx-grid",3),n.ic("sortChange",function(e){return o.changeSort(e)})("selectionChange",function(e){return o.changeSelect(e)}),n.Zb(),n.Sc(4,H,4,0,"ng-template",null,4,n.Tc),n.Zb(),n.Zb()),2&e){const e=n.Gc(5);n.Hb(3),n.vc("data",o.list)("columns",o.columns)("loading",o.isLoading)("columnResizable",o.columnResizable)("multiSelectable",o.multiSelectable)("rowSelectable",o.rowSelectable)("hideRowSelectionCheckbox",o.hideRowSelectionCheckbox)("rowHover",o.rowHover)("rowStriped",o.rowStriped)("showToolbar",o.showToolbar)("toolbarTitle","Subordinate")("toolbarTemplate",e)("columnHideable",o.columnHideable)("columnMovable",o.columnMovable)("expandable",o.expandable)("pageOnFront",o.showPaginator)("showPaginator",o.showPaginator)("pageSizeOptions",n.yc(20,k))("pageIndex",0)("pageSize",50)}},directives:[d.a,s.a,b.b,u.a],styles:["[_nghost-%COMP%]     .label{padding:5px 10px;border-radius:999px;background-color:#ffb74d}[_nghost-%COMP%]     .admin-dy-class{padding:5px 10px;border-radius:5px;background-color:#6fcffc}"],changeDetection:0}),e})(),N=(()=>{class e{constructor(e,o,t,a,l){var i,n,r,c,d,s,b,u,m,h,p,g,v,w,S,x,Z,C,y,U,H,k,T,R,z,I;this.fb=e,this.userService=o,this.snackBar=t,this.dialogRef=a,this.data=l,this.editmode=!1,this.falseValue="false",this.trueValue="true",this.addstaffform=this.fb.group({firstname:["",[f.y.required]],lastname:["",[f.y.required]],email:["",[f.y.required,f.y.email]],mobile:["",[f.y.required]],role:[{value:""},[f.y.required]],approvedstatus:[!1]}),l&&(console.log(l),this.editmode=!0,this.id=null===(n=null===(i=this.data)||void 0===i?void 0:i.record)||void 0===n?void 0:n._id,this.addstaffform.setValue({firstname:(null===(c=null===(r=this.data)||void 0===r?void 0:r.record)||void 0===c?void 0:c.firstname)?null===(s=null===(d=this.data)||void 0===d?void 0:d.record)||void 0===s?void 0:s.firstname:"null",lastname:(null===(u=null===(b=this.data)||void 0===b?void 0:b.record)||void 0===u?void 0:u.lastname)?null===(h=null===(m=this.data)||void 0===m?void 0:m.record)||void 0===h?void 0:h.lastname:"null",email:(null===(g=null===(p=this.data)||void 0===p?void 0:p.record)||void 0===g?void 0:g.email)?null===(w=null===(v=this.data)||void 0===v?void 0:v.record)||void 0===w?void 0:w.email:"null",mobile:(null===(x=null===(S=this.data)||void 0===S?void 0:S.record)||void 0===x?void 0:x.mobile)?null===(C=null===(Z=this.data)||void 0===Z?void 0:Z.record)||void 0===C?void 0:C.mobile:"null",role:(null===(U=null===(y=this.data)||void 0===y?void 0:y.record)||void 0===U?void 0:U.role)?null===(k=null===(H=this.data)||void 0===H?void 0:H.record)||void 0===k?void 0:k.role._id:"null",approvedstatus:!!(null===(R=null===(T=this.data)||void 0===T?void 0:T.record)||void 0===R?void 0:R.approvedstatus)&&(null===(I=null===(z=this.data)||void 0===z?void 0:z.record)||void 0===I?void 0:I.approvedstatus)}))}ngOnInit(){this.getallroles()}submituserform(){console.log(this.addstaffform.value)}getallroles(){this.userService.getroleslowerthanme().subscribe(e=>{console.log(e),this.allroles=e.data},e=>{console.log(e)})}checkboxChange(e,o){e.value=o?this.trueValue:this.falseValue,console.log(e.value)}}return e.\u0275fac=function(o){return new(o||e)(n.Ub(f.g),n.Ub(i.a),n.Ub(g.a),n.Ub(r.i),n.Ub(r.a))},e.\u0275cmp=n.Ob({type:e,selectors:[["add-user-form"]],decls:44,vars:10,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-sm","100"],[1,"demo-full-width"],["type","text","matInput","","placeholder","John","formControlName","firstname","required",""],[4,"ngIf"],["type","text","matInput","","placeholder","Deo","formControlName","lastname","required",""],["type","email","matInput","","placeholder","example@gmail.com","formControlName","email","required",""],["type","number","matInput","","placeholder","9999999999","formControlName","mobile","required",""],["matSuffix",""],["formControlName","role","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","approvedstatus",1,"st-chk",3,"value","change"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial",""],["mat-raised-button","","mat-dialog-close","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(e,o){1&e&&(n.ac(0,"h2",0),n.Uc(1),n.Zb(),n.ac(2,"form",1),n.ic("ngSubmit",function(){return o.submituserform()}),n.ac(3,"mat-dialog-content"),n.ac(4,"div",2),n.ac(5,"div",3),n.ac(6,"mat-form-field",4),n.ac(7,"mat-label"),n.Uc(8,"First Name"),n.Zb(),n.Vb(9,"input",5),n.Sc(10,T,3,3,"mat-error",6),n.Zb(),n.Zb(),n.ac(11,"div",3),n.ac(12,"mat-form-field",4),n.ac(13,"mat-label"),n.Uc(14,"Last Name"),n.Zb(),n.Vb(15,"input",7),n.Sc(16,R,3,3,"mat-error",6),n.Zb(),n.Zb(),n.ac(17,"mat-form-field",4),n.ac(18,"mat-label"),n.Uc(19,"Email"),n.Zb(),n.Vb(20,"input",8),n.Sc(21,z,3,3,"mat-error",6),n.Zb(),n.ac(22,"mat-form-field",4),n.ac(23,"mat-label"),n.Uc(24,"Mobile"),n.Zb(),n.Vb(25,"input",9),n.ac(26,"mat-icon",10),n.Uc(27,"smartphone"),n.Zb(),n.Sc(28,I,3,3,"mat-error",6),n.Zb(),n.ac(29,"div",3),n.ac(30,"mat-form-field",4),n.ac(31,"mat-label"),n.Uc(32,"Select Role"),n.Zb(),n.ac(33,"mat-select",11),n.Sc(34,O,2,2,"mat-option",12),n.Zb(),n.Sc(35,q,3,3,"mat-error",6),n.Zb(),n.Zb(),n.ac(36,"div",3),n.ac(37,"mat-checkbox",13),n.ic("change",function(e){return o.checkboxChange(e.source,e.checked)}),n.Uc(38,"Approve "),n.Zb(),n.Zb(),n.Zb(),n.Zb(),n.ac(39,"mat-dialog-actions"),n.ac(40,"button",14),n.Uc(41,"Cancel"),n.Zb(),n.ac(42,"button",15),n.Uc(43," Submit "),n.Zb(),n.Zb(),n.Zb()),2&e&&(n.Hb(1),n.Vc(o.editmode?"Edit Subordinate":"Create Subordinate"),n.Hb(1),n.vc("formGroup",o.addstaffform),n.Hb(8),n.vc("ngIf",o.addstaffform.get("firstname").invalid),n.Hb(6),n.vc("ngIf",o.addstaffform.get("lastname").invalid),n.Hb(5),n.vc("ngIf",o.addstaffform.get("email").invalid),n.Hb(7),n.vc("ngIf",o.addstaffform.get("mobile").invalid),n.Hb(6),n.vc("ngForOf",o.allroles),n.Hb(1),n.vc("ngIf",o.addstaffform.get("role").invalid),n.Hb(2),n.vc("value",o.falseValue),n.Hb(5),n.vc("disabled",o.addstaffform.invalid))},directives:[r.j,f.z,f.s,f.l,r.g,v.c,v.d,v.a,w.c,w.g,S.b,f.d,f.r,f.j,f.x,x.p,f.v,u.a,w.j,Z.a,x.o,C.a,r.d,b.b,r.e,w.b,y.o],pipes:[U.d],styles:[".demo-full-width[_ngcontent-%COMP%] {\n        width: 100%;\n      }"]}),e})();const P=[{path:"subordinates",component:M},{path:"agent",component:p}];let F=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.Sb({type:e}),e.\u0275inj=n.Rb({imports:[[l.j.forChild(P)],l.j]}),e})(),V=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.Sb({type:e}),e.\u0275inj=n.Rb({imports:[[a.a,F]]}),e})()}}]);
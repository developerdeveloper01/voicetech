(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{xUSb:function(e,n,s){"use strict";s.r(n),s.d(n,"PermissionsModule",function(){return T});var t=s("PCNd"),i=s("tyNb"),c=s("XNiG"),o=s("1G5W"),r=s("fXoL"),a=s("qSrz"),d=s("tgey"),l=s("jaxi"),u=s("3Pt+"),m=s("ofXK");let b=(()=>{class e{constructor(e,n){this.rolesSrv=e,this.permissionsSrv=n,this.permissionsOfRole={SUPERADMIN:["canAdd","canDelete","canEdit","canRead"],ADMIN:["canAdd","canEdit","canRead"],MANAGER:["canEdit","canRead"],RESELLER:["canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new c.a}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe(Object(o.a)(this._destroy$)).subscribe(e=>{console.log(e)}),this.permissionsSrv.permissions$.pipe(Object(o.a)(this._destroy$)).subscribe(e=>{console.log(e)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}return e.\u0275fac=function(n){return new(n||e)(r.Ub(a.e),r.Ub(a.d))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-permissions-role-switching"]],decls:28,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModel","ngModelChange","change"],["value","SUPERADMIN"],["value","ADMIN"],["value","MANAGER"],["value","RESELLER"],["value","GUEST"]],template:function(e,n){1&e&&(r.Vb(0,"page-header"),r.ac(1,"p"),r.Uc(2," The permissions management is powered by "),r.ac(3,"a",0),r.ac(4,"code"),r.Uc(5,"ngx-permissions"),r.Zb(),r.Zb(),r.Uc(6,".\n"),r.Zb(),r.ac(7,"mat-button-toggle-group",1),r.ic("ngModelChange",function(e){return n.currentRole=e})("change",function(){return n.onPermissionChange()}),r.ac(8,"mat-button-toggle",2),r.Uc(9,"SUPERADMIN"),r.Zb(),r.ac(10,"mat-button-toggle",3),r.Uc(11,"ADMIN"),r.Zb(),r.ac(12,"mat-button-toggle",4),r.Uc(13,"MANAGER"),r.Zb(),r.ac(14,"mat-button-toggle",5),r.Uc(15,"RESELLER"),r.Zb(),r.ac(16,"mat-button-toggle",6),r.Uc(17,"GUEST"),r.Zb(),r.Zb(),r.ac(18,"p"),r.Uc(19," Your current role: "),r.ac(20,"code"),r.Uc(21),r.nc(22,"json"),r.Zb(),r.Zb(),r.ac(23,"p"),r.Uc(24," Your current permissions: "),r.ac(25,"code"),r.Uc(26),r.nc(27,"json"),r.Zb(),r.Zb()),2&e&&(r.Hb(7),r.vc("ngModel",n.currentRole),r.Hb(14),r.Vc(r.oc(22,3,n.currentRole)),r.Hb(5),r.Vc(r.oc(27,5,n.currentPermissions)))},directives:[d.a,l.b,u.r,u.u,l.a],pipes:[m.i],styles:[""]}),e})(),p=(()=>{class e{constructor(e,n,s){this.rolesSrv=e,this.permissionsSrv=n,this.router=s,this.permis={SUPERADMIN:["canAddStaff","canDeleteStaff","canEditStaff","canReadStaff","canAddUser","canDeleteUser","canEditUser","canReadUser","canAddNumber","canDeleteNumber","canEditNumber","canReadNumber","canAddSIP","canDeleteSIP","canEditSIP","canReadSIP","canAddEnquiry","canDeleteEnquiry","canEditEnquiry","canReadEnquiry","canAddChat","canDeleteChat","canEditChat","canReadChat","canAddPlan","canDeletePlan","canEditPlan","canReadPlan","canAddReport","canDeleteReport","canEditReport","canReadReport"]},this.permissionsOfRole={SUPERADMIN:["canAdd","canDelete","canEdit","canRead","canAddStaff","canDeleteStaff","canEditStaff","canReadStaff","canAddUser","canDeleteUser","canEditUser","canReadUser","canAddNumber","canDeleteNumber","canEditNumber","canReadNumber","canAddSIP","canDeleteSIP","canEditSIP","canReadSIP","canAddEnquiry","canDeleteEnquiry","canEditEnquiry","canReadEnquiry","canAddChat","canDeleteChat","canEditChat","canReadChat","canAddPlan","canDeletePlan","canEditPlan","canReadPlan","canAddReport","canDeleteReport","canEditReport","canReadReport"],ADMIN:["canAdd","canEdit","canRead"],MANAGER:["canAdd","canRead"],RESELLER:["canAdd","canRead"],GUEST:["canRead"]}}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],console.log(this.currentRole),this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),console.log(this.currentPermissions)}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],console.log(this.permissionsOfRole[this.currentRole]),this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}return e.\u0275fac=function(n){return new(n||e)(r.Ub(a.e),r.Ub(a.d),r.Ub(i.f))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-permissions-route-guard"]],decls:24,vars:7,consts:[[3,"ngModel","ngModelChange","change"],["value","SUPERADMIN"],["value","ADMIN"],["value","MANAGER"],["value","RESELLER"],["value","GUEST"]],template:function(e,n){1&e&&(r.Vb(0,"page-header"),r.ac(1,"p"),r.Uc(2," The route will be redirected to dashboard after change permission.\n"),r.Zb(),r.ac(3,"mat-button-toggle-group",0),r.ic("ngModelChange",function(e){return n.currentRole=e})("change",function(){return n.onPermissionChange()}),r.ac(4,"mat-button-toggle",1),r.Uc(5,"SUPERADMIN"),r.Zb(),r.ac(6,"mat-button-toggle",2),r.Uc(7,"ADMIN"),r.Zb(),r.ac(8,"mat-button-toggle",3),r.Uc(9,"MANAGER"),r.Zb(),r.ac(10,"mat-button-toggle",4),r.Uc(11,"RESELLER"),r.Zb(),r.ac(12,"mat-button-toggle",5),r.Uc(13,"GUEST"),r.Zb(),r.Zb(),r.ac(14,"p"),r.Uc(15," Your current role: "),r.ac(16,"code"),r.Uc(17),r.nc(18,"json"),r.Zb(),r.Zb(),r.ac(19,"p"),r.Uc(20," Your current permissions: "),r.ac(21,"code"),r.Uc(22),r.nc(23,"json"),r.Zb(),r.Zb()),2&e&&(r.Hb(3),r.vc("ngModel",n.currentRole),r.Hb(14),r.Vc(r.oc(18,3,n.currentRole)),r.Hb(5),r.Vc(r.oc(23,5,n.currentPermissions)))},directives:[d.a,l.b,u.r,u.u,l.a],pipes:[m.i],styles:[""]}),e})();var g=s("6Nlu");function h(e,n){1&e&&(r.ac(0,"p",11),r.Uc(1," I should see it only admin "),r.Zb())}function P(e,n){1&e&&(r.ac(0,"p",11),r.Uc(1," Usage on both only and except I should see it only admin "),r.Zb())}function R(e,n){1&e&&(r.ac(0,"p",12),r.Uc(1,"I will see it only guest"),r.Zb())}function E(e,n){1&e&&(r.ac(0,"p",13),r.Uc(1,"I will see it except adminnnnn"),r.Zb())}function U(e,n){1&e&&(r.ac(0,"p",14),r.Uc(1,"I should see it except admin"),r.Zb())}function f(e,n){1&e&&(r.ac(0,"div"),r.Uc(1," Testing template\n"),r.Zb())}function S(e,n){1&e&&(r.ac(0,"div"),r.Uc(1," Testing template\n"),r.Zb())}function A(e,n){1&e&&(r.ac(0,"p",15),r.Uc(1,"else block"),r.Zb())}function y(e,n){1&e&&(r.ac(0,"p",16),r.Uc(1,"then block"),r.Zb())}function v(e,n){1&e&&(r.ac(0,"button"),r.Uc(1," This should be visible to admin or superadmin "),r.Zb())}function x(e,n){1&e&&(r.ac(0,"button"),r.Uc(1,"WTF"),r.Zb())}const Z=function(){return["admin"]},D=function(){return["guest"]},N=function(){return["adminnnnn"]},O=function(){return[]},I=[{path:"role-switching",component:b},{path:"route-guard",component:p,canActivate:[a.b],data:{permissions:{only:["SUPERADMIN","ADMIN","MANAGER","RESELLER"],redirectTo:"/dashboard"}}},{path:"test",component:(()=>{class e{constructor(e){this.permissionsSrv=e,this.comparedPermission=["guest"]}ngOnInit(){}getPermissions(){return Object.keys(this.permissionsSrv.getPermissions())}addPermission(){this.permissionsSrv.addPermission("admin",()=>new Promise((e,n)=>{setTimeout(()=>e(!0),2e3)}))}removePermission(){this.permissionsSrv.removePermission("admin")}unAuthorized(){console.log("unAuthorized")}authorized(){console.log("authorizes")}changeToAdmin(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}changeToAnotherPermission(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}changeToGuest(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}}return e.\u0275fac=function(n){return new(n||e)(r.Ub(a.d))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-permissions-test"]],decls:39,vars:28,consts:[["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept","permissionsAuthorized","permissionsUnauthorized"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],["a",""],["b",""],[4,"ngxPermissionsOnly"],[1,"bg-green-500","text-white"],[1,"bg-purple-500","text-white"],[1,"bg-orange-500","text-white"],[1,"bg-indigo-500","text-white"],[1,"bg-gray-900","text-white"],[1,"bg-gray-300"]],template:function(e,n){if(1&e&&(r.Vb(0,"page-header"),r.ac(1,"mtx-alert",0),r.Uc(2,"The permissions check will delay 2s."),r.Zb(),r.ac(3,"p"),r.ac(4,"button",1),r.ic("click",function(){return n.addPermission()}),r.Uc(5,"Add Permission [ admin ]"),r.Zb(),r.ac(6,"button",1),r.ic("click",function(){return n.removePermission()}),r.Uc(7,"Remove Permission [ admin ]"),r.Zb(),r.Zb(),r.Sc(8,h,2,0,"ng-template",2),r.Sc(9,P,2,0,"ng-template",3),r.Sc(10,R,2,0,"ng-template",2),r.Sc(11,E,2,0,"ng-template",4),r.ic("permissionsAuthorized",function(){return n.authorized()})("permissionsUnauthorized",function(){return n.unAuthorized()}),r.Sc(12,U,2,0,"ng-template",5),r.Sc(13,f,2,0,"div",6),r.Sc(14,S,2,0,"div",7),r.Sc(15,A,2,0,"ng-template",null,8,r.Tc),r.Sc(17,y,2,0,"ng-template",null,9,r.Tc),r.ac(19,"p"),r.Uc(20," Compared permission: "),r.ac(21,"code"),r.Uc(22),r.nc(23,"json"),r.Zb(),r.Zb(),r.ac(24,"div"),r.ac(25,"button",1),r.ic("click",function(){return n.changeToAdmin()}),r.Uc(26,"Change To Admin Permission"),r.Zb(),r.ac(27,"button",1),r.ic("click",function(){return n.changeToAnotherPermission()}),r.Uc(28,"Change To Awesome Permission"),r.Zb(),r.ac(29,"button",1),r.ic("click",function(){return n.changeToGuest()}),r.Uc(30,"Change To Guest Permission"),r.Zb(),r.Zb(),r.ac(31,"div"),r.Sc(32,v,2,0,"button",10),r.Sc(33,x,2,0,"button",10),r.Zb(),r.ac(34,"p"),r.Uc(35," Your current permissions: "),r.ac(36,"code"),r.Uc(37),r.nc(38,"json"),r.Zb(),r.Zb()),2&e){const e=r.Gc(16),s=r.Gc(18);r.Hb(8),r.vc("ngxPermissionsOnly",r.yc(20,Z)),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(21,Z))("ngxPermissionsExcept","hhhhh"),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(22,D)),r.Hb(1),r.vc("ngxPermissionsExcept",r.yc(23,N)),r.Hb(1),r.vc("ngxPermissionsExcept",r.yc(24,Z)),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(25,Z))("ngxPermissionsOnlyElse",e)("ngxPermissionsOnlyThen",s),r.Hb(1),r.vc("ngxPermissionsExcept",r.yc(26,Z))("ngxPermissionsExceptElse",e)("ngxPermissionsExceptThen",s),r.Hb(8),r.Vc(r.oc(23,16,n.comparedPermission)),r.Hb(10),r.vc("ngxPermissionsOnly",n.comparedPermission),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(27,O)),r.Hb(4),r.Vc(r.oc(38,18,n.getPermissions()))}},directives:[d.a,g.a,a.a],pipes:[m.i],styles:[""]}),e})(),canActivate:[a.b],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}];let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({imports:[[i.j.forChild(I)],i.j]}),e})(),T=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({imports:[[t.a,M]]}),e})()}}]);
!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{JMJj:function(t,i,n){"use strict";n.r(i),n.d(i,"ReportModule",function(){return F});var a=n("tyNb"),r=n("3Pt+"),l=n("0IaG"),s=n("M9IT"),c=n("xdv0"),u=n("wwJg"),d=n("JX91"),b=n("lJxs"),m=n("fXoL"),p=n("r0g6"),h=n("tgey"),f=n("kmnG"),g=n("qFsG"),v=n("iadO"),w=n("/1cH"),y=n("ofXK"),k=n("bTqV"),S=n("hGDI"),x=n("FKr1"),C=n("dNgK"),D=n("d3UM");function Z(e,t){if(1&e&&(m.ac(0,"mat-option",16),m.Uc(1),m.Zb()),2&e){var o=t.$implicit;m.vc("value",o),m.Hb(1),m.Wc(" ",o," ")}}function U(e,t){1&e&&m.Uc(0),2&e&&m.Wc(" ",t.$implicit.uuid," ")}function V(e,t){1&e&&m.Uc(0),2&e&&m.Wc(" ",t.$implicit.uuid," ")}var T,O,H,I,N,P=function(){return[50,100,200,500]},_=".demo-full-width[_ngcontent-%COMP%] {\n        width: 100%;\n      }",E=((H=function(){function t(o,i,n,a,l){var s=this;e(this,t),this.dialog=o,this.dialogx=i,this.userService=n,this.cdr=a,this.fb=l,this.notinusestartingDate=new Date(Date.now()+1728e5),this.notinuseendDate=new Date(Date.now()-864e5),this.startDate=new r.h(new Date),this.endDate=new r.h(new Date),this.columns=[{header:"ID",sortable:!0,field:"id"},{header:"Caller ID",sortable:!0,field:"caller_id_name"},{header:"Destination Number",sortable:!0,field:"destination_number"},{header:"Context",sortable:!0,hide:!0,field:"context"},{header:"Start Call",sortable:!0,field:"start_stamp"},{header:"Answer Stamp",sortable:!0,hide:!0,field:"answer_stamp"},{header:"End Call",sortable:!0,field:"end_stamp"},{header:"Duration",sortable:!0,hide:!0,field:"duration"},{header:"Bill",sortable:!0,field:"billsec"},{header:"Hangup Cause",sortable:!0,hide:!0,field:"hangup_cause"},{header:"Call Unique ID",sortable:!0,field:"uuid",showExpand:!0},{header:"Date",sortable:!0,field:"created_time"},{header:"Actions",field:"action",minWidth:120,width:"120px",pinned:"right",type:"button",buttons:[{type:"icon",icon:"edit",tooltip:"edit",click:function(e){return s.openEditDstNumber(e)}},{color:"warn",icon:"delete",text:"delete",tooltip:"delete",pop:!0,popTitle:"Confirm Delete",popCloseText:"Cancel",popOkText:"Delete",click:function(e){return s.delete(e)}}]}],this.list=[],this.total=0,this.multiSelectable=!1,this.rowSelectable=!1,this.hideRowSelectionCheckbox=!1,this.showToolbar=!0,this.columnHideable=!0,this.columnMovable=!0,this.rowHover=!0,this.rowStriped=!0,this.showPaginator=!0,this.expandable=!0,this.columnResizable=!1,this.columnMenuButtonType="raised",this.myControl=new r.h,this.options=["1256","4894","4642","8462","8521"]}return o(t,[{key:"ngOnInit",value:function(){var e=this;this.filteredOptions=this.myControl.valueChanges.pipe(Object(d.a)(""),Object(b.a)(function(t){return e._filter(t)})),this.getallcdrreport(),this.searchform=this.fb.group({startdate:[new Date(Date.now())],enddate:[Date.now()],searchinput:[""]})}},{key:"_filter",value:function(e){var t=e.toLowerCase();return this.options.filter(function(e){return e.toLowerCase().includes(t)})}},{key:"edit",value:function(e){this.dialogx.originalOpen(u.a,{width:"900px",data:{record:e}}).afterClosed().subscribe(function(){return console.log("The dialog was closed")})}},{key:"openEditDstNumber",value:function(e){var t=this;this.dialog.open(q,{width:"500px",data:{record:e}}).afterClosed().subscribe(function(){console.log("The edit dailog closed"),t.getallcdrreport()})}},{key:"delete",value:function(e){var t=this;this.userService.deletenumber(e._id).subscribe(function(o){console.log("%cips.component.ts line:248 response","color: #26bfa5;",o),t.isLoading=!1,t.getallcdrreport(),t.cdr.detectChanges(),t.dialogx.alert("You have deleted ".concat(e.dstnumber,"!"))},function(e){console.log("%cerror ips.component.ts line:254 ","color: red; display: block; width: 100%;",e)})}},{key:"openAddDstNumber",value:function(){var e=this;this.dialog.open(M,{width:"500px"}).afterClosed().subscribe(function(){e.getallcdrreport()})}},{key:"changeSort",value:function(e){console.log(e)}},{key:"getallcdrreport",value:function(){var e=this;this.userService.allcdrreport().subscribe(function(t){console.log("%cips.component.ts line:248 response","color: #26bfa5;",t),e.list=t.data,e.total=t.data.length,e.isLoading=!1,e.cdr.detectChanges()},function(e){console.log(e)})}},{key:"searchcdrreport",value:function(){var e=this;this.userService.searchreportbynumber({oneinput:"61212581"}).subscribe(function(t){console.log("%cips.component.ts line:248 response","color: #26bfa5;",t),e.list=t.data,e.total=t.data.length,e.isLoading=!1,e.cdr.detectChanges()},function(e){console.log(e)})}},{key:"ngAfterViewInit",value:function(){this.isLoading=!0}},{key:"ngOnDestroy",value:function(){console.log("component destroyed")}},{key:"submitsearch",value:function(){var e=this;console.log(this.searchform.value),this.userService.searchreportbynumber(this.searchform.value).subscribe(function(t){console.log("%cips.component.ts line:248 response","color: #26bfa5;",t),e.list=t.data,e.total=t.data.length,e.isLoading=!1,e.cdr.detectChanges()},function(e){console.log(e)})}},{key:"pagechangeevent",value:function(e){console.log(e)}},{key:"rowselection",value:function(e){console.log(e)}},{key:"cellselection",value:function(e){console.log(e)}},{key:"verNotificacion",value:function(e){console.log(e)}},{key:"expansion",value:function(e){console.log(e);var t=e.data.created_time.split(" ").slice(0,1).join();this.userService.getsinglerecording(t,e.data.caller_id_name,e.data.destination_number,e.data.uuid).subscribe(function(e){console.log(e)},function(e){console.log(e)})}}]),t}()).\u0275fac=function(e){return new(e||H)(m.Ub(l.c),m.Ub(p.a),m.Ub(c.a),m.Ub(m.h),m.Ub(r.g))},H.\u0275cmp=m.Ob({type:H,selectors:[["app-cdr"]],viewQuery:function(e,t){var o;1&e&&m.Yc(s.a,1),2&e&&m.Fc(o=m.jc())&&(t.paginator=o.first)},decls:30,vars:34,consts:[[3,"formGroup","ngSubmit"],["matInput","","placeholder","Start Date","formControlName","startdate",3,"matDatepicker","max"],["matSuffix","",3,"for"],["picker1",""],["matInput","","placeholder","End Date","formControlName","enddate",3,"matDatepicker","min","max"],["picker2",""],[1,"m-r-8"],["type","text","placeholder","Pick one","aria-label","Number","matInput","","formControlName","searchinput",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","type","submit","color","primary"],[1,"row"],[1,"col-lg-12"],[1,"mat-elevation-z8",3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","expansionTemplate","summaryTemplate","pageOnFront","showPaginator","pageSizeOptions","pageIndex","pageSize","page","sortChange","rowSelectionChange","expansionChange","cellSelectionChange","rowClick"],["expansionTpl",""],["summaryTpl",""],[3,"value"]],template:function(e,t){if(1&e&&(m.Vb(0,"page-header"),m.ac(1,"section"),m.ac(2,"form",0),m.ic("ngSubmit",function(){return t.submitsearch()}),m.ac(3,"mat-form-field"),m.Vb(4,"input",1),m.Vb(5,"mat-datepicker-toggle",2),m.Vb(6,"mat-datepicker",null,3),m.Zb(),m.ac(8,"mat-form-field"),m.Vb(9,"input",4),m.Vb(10,"mat-datepicker-toggle",2),m.Vb(11,"mat-datepicker",null,5),m.Zb(),m.ac(13,"mat-form-field",6),m.ac(14,"mat-label"),m.Uc(15,"Number"),m.Zb(),m.Vb(16,"input",7),m.ac(17,"mat-autocomplete",null,8),m.Sc(19,Z,2,2,"mat-option",9),m.nc(20,"async"),m.Zb(),m.Zb(),m.ac(21,"button",10),m.Uc(22,"Search"),m.Zb(),m.Zb(),m.ac(23,"div",11),m.ac(24,"div",12),m.ac(25,"mtx-grid",13),m.ic("page",function(e){return t.pagechangeevent(e)})("sortChange",function(e){return t.changeSort(e)})("rowSelectionChange",function(e){return t.rowselection(e)})("expansionChange",function(e){return t.expansion(e)})("cellSelectionChange",function(e){return t.cellselection(e)})("rowClick",function(e){return t.verNotificacion(e)}),m.Zb(),m.Sc(26,U,1,1,"ng-template",null,14,m.Tc),m.Sc(28,V,1,1,"ng-template",null,15,m.Tc),m.Zb(),m.Zb(),m.Zb()),2&e){var o=m.Gc(7),i=m.Gc(12),n=m.Gc(18),a=m.Gc(27),r=m.Gc(29);m.Hb(2),m.vc("formGroup",t.searchform),m.Hb(2),m.vc("matDatepicker",o)("max",t.notinuseendDate),m.Hb(1),m.vc("for",o),m.Hb(4),m.vc("matDatepicker",i)("min",t.searchform.value.startdate)("max",t.notinuseendDate),m.Hb(1),m.vc("for",i),m.Hb(6),m.vc("matAutocomplete",n),m.Hb(3),m.vc("ngForOf",m.oc(20,31,t.filteredOptions)),m.Hb(6),m.vc("data",t.list)("columns",t.columns)("loading",t.isLoading)("columnResizable",t.columnResizable)("multiSelectable",t.multiSelectable)("rowSelectable",t.rowSelectable)("hideRowSelectionCheckbox",t.hideRowSelectionCheckbox)("rowHover",t.rowHover)("rowStriped",t.rowStriped)("showToolbar",t.showToolbar)("toolbarTitle","CDR Reports")("columnHideable",t.columnHideable)("columnMovable",t.columnMovable)("expandable",t.expandable)("expansionTemplate",a)("summaryTemplate",r)("pageOnFront",t.showPaginator)("showPaginator",t.showPaginator)("pageSizeOptions",m.yc(33,P))("pageIndex",0)("pageSize",50)}},directives:[h.a,r.z,r.s,r.l,f.c,g.b,r.d,v.c,r.r,r.j,v.f,f.j,v.b,f.g,w.c,w.a,y.o,k.b,S.a,x.o],pipes:[y.b],styles:[""],changeDetection:0}),H),M=((O=function(){function t(o,i,n){e(this,t),this.fb=o,this.userService=i,this.snackBar=n,this.falseValue="false",this.trueValue="true",this.adddstnumber=this.fb.group({ip:["",[r.y.required]],dstnumber:["",[r.y.required,r.y.min(1e9),r.y.max(9999999999)]],inusestatus:[!1]})}return o(t,[{key:"ngOnInit",value:function(){this.getallips()}},{key:"getErrorMessage",value:function(e){return e.get("dstnumber").hasError("required")?"validations.required":e.get("dstnumber").hasError("min")?"validations.min":e.get("dstnumber").hasError("max")?"validations.max":""}},{key:"checkboxChange",value:function(e,t){e.value=t?this.trueValue:this.falseValue}},{key:"submitdstnumber",value:function(){var e=this;this.adddstnumber.valid?this.userService.adddstnumber(this.adddstnumber.value).subscribe(function(t){console.log("%cips.component.ts line:248 response","color: #26bfa5;",t),e.snackBar.open("DST Number Added Successfully!","",{duration:2e3}),e.adddstnumber.reset()},function(e){console.log("%cerror ips.component.ts line:254 ","color: red; display: block; width: 100%;",e)}):this.getErrorMessage(this.adddstnumber)}},{key:"getallips",value:function(){var e=this;this.userService.getallips().subscribe(function(t){console.log("%cips.component.ts line:248 response","color: #26bfa5;",t),e.allips=t.data},function(e){console.log("%cerror ips.component.ts line:254 ","color: red; display: block; width: 100%;",e)})}},{key:"isFieldValid",value:function(e){return!this.adddstnumber.get(e).valid&&this.adddstnumber.get(e).touched}}]),t}()).\u0275fac=function(e){return new(e||O)(m.Ub(r.g),m.Ub(c.a),m.Ub(C.a))},O.\u0275cmp=m.Ob({type:O,selectors:[["add-cdr-form"]],decls:46,vars:1,consts:[["mat-dialog-title",""],[1,"row"],[1,"col-lg-12"],[2,"width","100%"],["matInput","","placeholder","Plan Title","formControlName","","required",""],["matInput","","placeholder","Plan Price","formControlName","","required",""],["required","","formControlName","gender","required",""],["value","1"],["value","2"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","mat-dialog-close","","color","primary","cdkFocusInitial","","type","submit",3,"disabled"]],template:function(e,t){1&e&&(m.ac(0,"h2",0),m.Uc(1,"Price to Minute Plan"),m.Zb(),m.ac(2,"form"),m.ac(3,"mat-dialog-content"),m.ac(4,"div",1),m.ac(5,"div",2),m.ac(6,"mat-form-field",3),m.ac(7,"mat-label"),m.Uc(8,"Plan Title"),m.Zb(),m.Vb(9,"input",4),m.Vb(10,"mat-error"),m.Zb(),m.Zb(),m.ac(11,"div",2),m.ac(12,"mat-form-field",3),m.ac(13,"mat-label"),m.Uc(14,"Plan Price"),m.Zb(),m.Vb(15,"input",5),m.Vb(16,"mat-error"),m.Zb(),m.Zb(),m.ac(17,"div",2),m.ac(18,"mat-form-field",3),m.ac(19,"mat-label"),m.Uc(20,"Validity"),m.Zb(),m.ac(21,"mat-select",6),m.ac(22,"mat-option"),m.Uc(23,"-- None --"),m.Zb(),m.ac(24,"mat-option",7),m.Uc(25,"15 days"),m.Zb(),m.ac(26,"mat-option",8),m.Uc(27,"30 days"),m.Zb(),m.Zb(),m.Vb(28,"mat-error"),m.Zb(),m.Zb(),m.ac(29,"div",2),m.ac(30,"mat-form-field",3),m.ac(31,"mat-label"),m.Uc(32," Minute Balance"),m.Zb(),m.Vb(33,"input",5),m.Vb(34,"mat-error"),m.Zb(),m.Zb(),m.ac(35,"div",2),m.ac(36,"mat-form-field",3),m.ac(37,"mat-label"),m.Uc(38," Description"),m.Zb(),m.Vb(39,"input",5),m.Vb(40,"mat-error"),m.Zb(),m.Zb(),m.Zb(),m.Zb(),m.ac(41,"mat-dialog-actions"),m.ac(42,"button",9),m.Uc(43,"Cancel"),m.Zb(),m.ac(44,"button",10),m.Uc(45,"Submit"),m.Zb(),m.Zb(),m.Zb()),2&e&&(m.Hb(44),m.vc("disabled",t.adddstnumber.invalid))},directives:[l.j,r.z,r.s,r.t,l.g,f.c,f.g,g.b,r.d,r.r,r.j,r.x,f.b,D.a,x.o,l.d,k.b,l.e],styles:[_]}),O),q=((T=function(){function t(o,i,n,a,l){e(this,t),this.fb=o,this.userService=i,this.snackBar=n,this.dialogRef=a,this.data=l,this.falseValue="false",this.trueValue="true",console.log(l),this.editdstnumber=this.fb.group({ip:["",[r.y.required]],dstnumber:["",[r.y.required,r.y.min(1e9),r.y.max(9999999999)]],inusestatus:[!1]})}return o(t,[{key:"ngOnInit",value:function(){var e,t,o,i,n,a,r,l,s,c,u;this.getallips(),this.editdstnumber.setValue({ip:(null===(t=null===(e=this.data)||void 0===e?void 0:e.record)||void 0===t?void 0:t.ip)?null===(n=null===(i=null===(o=this.data)||void 0===o?void 0:o.record)||void 0===i?void 0:i.ip)||void 0===n?void 0:n._id:"null",dstnumber:(null===(r=null===(a=this.data)||void 0===a?void 0:a.record)||void 0===r?void 0:r.dstnumber)?null===(s=null===(l=this.data)||void 0===l?void 0:l.record)||void 0===s?void 0:s.dstnumber:"null",inusestatus:!!(null===(u=null===(c=this.data)||void 0===c?void 0:c.record)||void 0===u?void 0:u.inusestatus)})}},{key:"getErrorMessage",value:function(e){return e.get("dstnumber").hasError("required")?"validations.required":e.get("dstnumber").hasError("min")?"validations.min":e.get("dstnumber").hasError("max")?"validations.max":""}},{key:"getallips",value:function(){var e=this;this.userService.getallips().subscribe(function(t){console.log("%cips.component.ts line:248 response","color: #26bfa5;",t),e.allips=t.data},function(e){console.log("%cerror ips.component.ts line:254 ","color: red; display: block; width: 100%;",e)})}},{key:"checkboxChange",value:function(e,t){e.value=t?this.trueValue:this.falseValue}},{key:"isFieldValid",value:function(e){return!this.editdstnumber.get(e).valid&&this.editdstnumber.get(e).touched}},{key:"submitdstnumber",value:function(){var e=this;console.log(this.editdstnumber.value),this.editdstnumber.valid?this.userService.editdstnumber(this.data.record._id,this.editdstnumber.value).subscribe(function(t){console.log("%cips.component.ts line:248 response","color: #26bfa5;",t),e.snackBar.open("IP Edited Successfully!","",{duration:2e3}),e.editdstnumber.reset()},function(e){console.log("%cerror ips.component.ts line:254 ","color: red; display: block; width: 100%;",e)}):this.getErrorMessage(this.editdstnumber)}}]),t}()).\u0275fac=function(e){return new(e||T)(m.Ub(r.g),m.Ub(c.a),m.Ub(C.a),m.Ub(l.i),m.Ub(l.a))},T.\u0275cmp=m.Ob({type:T,selectors:[["edit-cdr-form"]],decls:0,vars:0,template:function(e,t){},styles:[_]}),T),j=[{path:"cdr",component:E}],R=((I=function t(){e(this,t)}).\u0275fac=function(e){return new(e||I)},I.\u0275mod=m.Sb({type:I}),I.\u0275inj=m.Rb({imports:[[a.j.forChild(j)],a.j]}),I),z=n("M0ag"),F=((N=function t(){e(this,t)}).\u0275fac=function(e){return new(e||N)},N.\u0275mod=m.Sb({type:N}),N.\u0275inj=m.Rb({imports:[[z.d,R]]}),N)}}])}();
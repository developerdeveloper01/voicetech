!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function t(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{xUSb:function(n,s,i){"use strict";i.r(s),i.d(s,"PermissionsModule",function(){return L});var c,o,r=i("PCNd"),a=i("tyNb"),u=i("XNiG"),l=i("1G5W"),d=i("fXoL"),m=i("qSrz"),b=i("tgey"),p=i("jaxi"),h=i("3Pt+"),g=i("ofXK"),f=((o=function(){function n(t,s){e(this,n),this.rolesSrv=t,this.permissionsSrv=s,this.permissionsOfRole={SUPERADMIN:["canAdd","canDelete","canEdit","canRead"],ADMIN:["canAdd","canEdit","canRead"],MANAGER:["canEdit","canRead"],RESELLER:["canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new u.a}return t(n,[{key:"ngOnInit",value:function(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe(Object(l.a)(this._destroy$)).subscribe(function(e){console.log(e)}),this.permissionsSrv.permissions$.pipe(Object(l.a)(this._destroy$)).subscribe(function(e){console.log(e)})}},{key:"ngOnDestroy",value:function(){this._destroy$.next(),this._destroy$.complete()}},{key:"onPermissionChange",value:function(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}]),n}()).\u0275fac=function(e){return new(e||o)(d.Ub(m.e),d.Ub(m.d))},o.\u0275cmp=d.Ob({type:o,selectors:[["app-permissions-role-switching"]],decls:28,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModel","ngModelChange","change"],["value","SUPERADMIN"],["value","ADMIN"],["value","MANAGER"],["value","RESELLER"],["value","GUEST"]],template:function(e,n){1&e&&(d.Vb(0,"page-header"),d.ac(1,"p"),d.Uc(2," The permissions management is powered by "),d.ac(3,"a",0),d.ac(4,"code"),d.Uc(5,"ngx-permissions"),d.Zb(),d.Zb(),d.Uc(6,".\n"),d.Zb(),d.ac(7,"mat-button-toggle-group",1),d.ic("ngModelChange",function(e){return n.currentRole=e})("change",function(){return n.onPermissionChange()}),d.ac(8,"mat-button-toggle",2),d.Uc(9,"SUPERADMIN"),d.Zb(),d.ac(10,"mat-button-toggle",3),d.Uc(11,"ADMIN"),d.Zb(),d.ac(12,"mat-button-toggle",4),d.Uc(13,"MANAGER"),d.Zb(),d.ac(14,"mat-button-toggle",5),d.Uc(15,"RESELLER"),d.Zb(),d.ac(16,"mat-button-toggle",6),d.Uc(17,"GUEST"),d.Zb(),d.Zb(),d.ac(18,"p"),d.Uc(19," Your current role: "),d.ac(20,"code"),d.Uc(21),d.nc(22,"json"),d.Zb(),d.Zb(),d.ac(23,"p"),d.Uc(24," Your current permissions: "),d.ac(25,"code"),d.Uc(26),d.nc(27,"json"),d.Zb(),d.Zb()),2&e&&(d.Hb(7),d.vc("ngModel",n.currentRole),d.Hb(14),d.Vc(d.oc(22,3,n.currentRole)),d.Hb(5),d.Vc(d.oc(27,5,n.currentPermissions)))},directives:[b.a,p.b,h.r,h.u,p.a],pipes:[g.i],styles:[""]}),o),P=((c=function(){function n(t,s,i){e(this,n),this.rolesSrv=t,this.permissionsSrv=s,this.router=i,this.permis={SUPERADMIN:["canAddStaff","canDeleteStaff","canEditStaff","canReadStaff","canAddUser","canDeleteUser","canEditUser","canReadUser","canAddNumber","canDeleteNumber","canEditNumber","canReadNumber","canAddSIP","canDeleteSIP","canEditSIP","canReadSIP","canAddEnquiry","canDeleteEnquiry","canEditEnquiry","canReadEnquiry","canAddChat","canDeleteChat","canEditChat","canReadChat","canAddPlan","canDeletePlan","canEditPlan","canReadPlan","canAddReport","canDeleteReport","canEditReport","canReadReport"]},this.permissionsOfRole={SUPERADMIN:["canAdd","canDelete","canEdit","canRead","canAddStaff","canDeleteStaff","canEditStaff","canReadStaff","canAddUser","canDeleteUser","canEditUser","canReadUser","canAddNumber","canDeleteNumber","canEditNumber","canReadNumber","canAddSIP","canDeleteSIP","canEditSIP","canReadSIP","canAddEnquiry","canDeleteEnquiry","canEditEnquiry","canReadEnquiry","canAddChat","canDeleteChat","canEditChat","canReadChat","canAddPlan","canDeletePlan","canEditPlan","canReadPlan","canAddReport","canDeleteReport","canEditReport","canReadReport"],ADMIN:["canAdd","canEdit","canRead"],MANAGER:["canAdd","canRead"],RESELLER:["canAdd","canRead"],GUEST:["canRead"]}}return t(n,[{key:"ngOnInit",value:function(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],console.log(this.currentRole),this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),console.log(this.currentPermissions)}},{key:"onPermissionChange",value:function(){this.currentPermissions=this.permissionsOfRole[this.currentRole],console.log(this.permissionsOfRole[this.currentRole]),this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}]),n}()).\u0275fac=function(e){return new(e||c)(d.Ub(m.e),d.Ub(m.d),d.Ub(a.f))},c.\u0275cmp=d.Ob({type:c,selectors:[["app-permissions-route-guard"]],decls:24,vars:7,consts:[[3,"ngModel","ngModelChange","change"],["value","SUPERADMIN"],["value","ADMIN"],["value","MANAGER"],["value","RESELLER"],["value","GUEST"]],template:function(e,n){1&e&&(d.Vb(0,"page-header"),d.ac(1,"p"),d.Uc(2," The route will be redirected to dashboard after change permission.\n"),d.Zb(),d.ac(3,"mat-button-toggle-group",0),d.ic("ngModelChange",function(e){return n.currentRole=e})("change",function(){return n.onPermissionChange()}),d.ac(4,"mat-button-toggle",1),d.Uc(5,"SUPERADMIN"),d.Zb(),d.ac(6,"mat-button-toggle",2),d.Uc(7,"ADMIN"),d.Zb(),d.ac(8,"mat-button-toggle",3),d.Uc(9,"MANAGER"),d.Zb(),d.ac(10,"mat-button-toggle",4),d.Uc(11,"RESELLER"),d.Zb(),d.ac(12,"mat-button-toggle",5),d.Uc(13,"GUEST"),d.Zb(),d.Zb(),d.ac(14,"p"),d.Uc(15," Your current role: "),d.ac(16,"code"),d.Uc(17),d.nc(18,"json"),d.Zb(),d.Zb(),d.ac(19,"p"),d.Uc(20," Your current permissions: "),d.ac(21,"code"),d.Uc(22),d.nc(23,"json"),d.Zb(),d.Zb()),2&e&&(d.Hb(3),d.vc("ngModel",n.currentRole),d.Hb(14),d.Vc(d.oc(18,3,n.currentRole)),d.Hb(5),d.Vc(d.oc(23,5,n.currentPermissions)))},directives:[b.a,p.b,h.r,h.u,p.a],pipes:[g.i],styles:[""]}),c),R=i("6Nlu");function E(e,n){1&e&&(d.ac(0,"p",11),d.Uc(1," I should see it only admin "),d.Zb())}function y(e,n){1&e&&(d.ac(0,"p",11),d.Uc(1," Usage on both only and except I should see it only admin "),d.Zb())}function v(e,n){1&e&&(d.ac(0,"p",12),d.Uc(1,"I will see it only guest"),d.Zb())}function U(e,n){1&e&&(d.ac(0,"p",13),d.Uc(1,"I will see it except adminnnnn"),d.Zb())}function S(e,n){1&e&&(d.ac(0,"p",14),d.Uc(1,"I should see it except admin"),d.Zb())}function A(e,n){1&e&&(d.ac(0,"div"),d.Uc(1," Testing template\n"),d.Zb())}function x(e,n){1&e&&(d.ac(0,"div"),d.Uc(1," Testing template\n"),d.Zb())}function Z(e,n){1&e&&(d.ac(0,"p",15),d.Uc(1,"else block"),d.Zb())}function D(e,n){1&e&&(d.ac(0,"p",16),d.Uc(1,"then block"),d.Zb())}function N(e,n){1&e&&(d.ac(0,"button"),d.Uc(1," This should be visible to admin or superadmin "),d.Zb())}function O(e,n){1&e&&(d.ac(0,"button"),d.Uc(1,"WTF"),d.Zb())}var k,I,M,T=function(){return["admin"]},w=function(){return["guest"]},C=function(){return["adminnnnn"]},G=function(){return[]},j=[{path:"role-switching",component:f},{path:"route-guard",component:P,canActivate:[m.b],data:{permissions:{only:["SUPERADMIN","ADMIN","MANAGER","RESELLER"],redirectTo:"/dashboard"}}},{path:"test",component:(k=function(){function n(t){e(this,n),this.permissionsSrv=t,this.comparedPermission=["guest"]}return t(n,[{key:"ngOnInit",value:function(){}},{key:"getPermissions",value:function(){return Object.keys(this.permissionsSrv.getPermissions())}},{key:"addPermission",value:function(){this.permissionsSrv.addPermission("admin",function(){return new Promise(function(e,n){setTimeout(function(){return e(!0)},2e3)})})}},{key:"removePermission",value:function(){this.permissionsSrv.removePermission("admin")}},{key:"unAuthorized",value:function(){console.log("unAuthorized")}},{key:"authorized",value:function(){console.log("authorizes")}},{key:"changeToAdmin",value:function(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}},{key:"changeToAnotherPermission",value:function(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}},{key:"changeToGuest",value:function(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}}]),n}(),k.\u0275fac=function(e){return new(e||k)(d.Ub(m.d))},k.\u0275cmp=d.Ob({type:k,selectors:[["app-permissions-test"]],decls:39,vars:28,consts:[["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept","permissionsAuthorized","permissionsUnauthorized"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],["a",""],["b",""],[4,"ngxPermissionsOnly"],[1,"bg-green-500","text-white"],[1,"bg-purple-500","text-white"],[1,"bg-orange-500","text-white"],[1,"bg-indigo-500","text-white"],[1,"bg-gray-900","text-white"],[1,"bg-gray-300"]],template:function(e,n){if(1&e&&(d.Vb(0,"page-header"),d.ac(1,"mtx-alert",0),d.Uc(2,"The permissions check will delay 2s."),d.Zb(),d.ac(3,"p"),d.ac(4,"button",1),d.ic("click",function(){return n.addPermission()}),d.Uc(5,"Add Permission [ admin ]"),d.Zb(),d.ac(6,"button",1),d.ic("click",function(){return n.removePermission()}),d.Uc(7,"Remove Permission [ admin ]"),d.Zb(),d.Zb(),d.Sc(8,E,2,0,"ng-template",2),d.Sc(9,y,2,0,"ng-template",3),d.Sc(10,v,2,0,"ng-template",2),d.Sc(11,U,2,0,"ng-template",4),d.ic("permissionsAuthorized",function(){return n.authorized()})("permissionsUnauthorized",function(){return n.unAuthorized()}),d.Sc(12,S,2,0,"ng-template",5),d.Sc(13,A,2,0,"div",6),d.Sc(14,x,2,0,"div",7),d.Sc(15,Z,2,0,"ng-template",null,8,d.Tc),d.Sc(17,D,2,0,"ng-template",null,9,d.Tc),d.ac(19,"p"),d.Uc(20," Compared permission: "),d.ac(21,"code"),d.Uc(22),d.nc(23,"json"),d.Zb(),d.Zb(),d.ac(24,"div"),d.ac(25,"button",1),d.ic("click",function(){return n.changeToAdmin()}),d.Uc(26,"Change To Admin Permission"),d.Zb(),d.ac(27,"button",1),d.ic("click",function(){return n.changeToAnotherPermission()}),d.Uc(28,"Change To Awesome Permission"),d.Zb(),d.ac(29,"button",1),d.ic("click",function(){return n.changeToGuest()}),d.Uc(30,"Change To Guest Permission"),d.Zb(),d.Zb(),d.ac(31,"div"),d.Sc(32,N,2,0,"button",10),d.Sc(33,O,2,0,"button",10),d.Zb(),d.ac(34,"p"),d.Uc(35," Your current permissions: "),d.ac(36,"code"),d.Uc(37),d.nc(38,"json"),d.Zb(),d.Zb()),2&e){var t=d.Gc(16),s=d.Gc(18);d.Hb(8),d.vc("ngxPermissionsOnly",d.yc(20,T)),d.Hb(1),d.vc("ngxPermissionsOnly",d.yc(21,T))("ngxPermissionsExcept","hhhhh"),d.Hb(1),d.vc("ngxPermissionsOnly",d.yc(22,w)),d.Hb(1),d.vc("ngxPermissionsExcept",d.yc(23,C)),d.Hb(1),d.vc("ngxPermissionsExcept",d.yc(24,T)),d.Hb(1),d.vc("ngxPermissionsOnly",d.yc(25,T))("ngxPermissionsOnlyElse",t)("ngxPermissionsOnlyThen",s),d.Hb(1),d.vc("ngxPermissionsExcept",d.yc(26,T))("ngxPermissionsExceptElse",t)("ngxPermissionsExceptThen",s),d.Hb(8),d.Vc(d.oc(23,16,n.comparedPermission)),d.Hb(10),d.vc("ngxPermissionsOnly",n.comparedPermission),d.Hb(1),d.vc("ngxPermissionsOnly",d.yc(27,G)),d.Hb(4),d.Vc(d.oc(38,18,n.getPermissions()))}},directives:[b.a,R.a,m.a],pipes:[g.i],styles:[""]}),k),canActivate:[m.b],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}],H=((M=function n(){e(this,n)}).\u0275fac=function(e){return new(e||M)},M.\u0275mod=d.Sb({type:M}),M.\u0275inj=d.Rb({imports:[[a.j.forChild(j)],a.j]}),M),L=((I=function n(){e(this,n)}).\u0275fac=function(e){return new(e||I)},I.\u0275mod=d.Sb({type:I}),I.\u0275inj=d.Rb({imports:[[r.a,H]]}),I)}}])}();
(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{JMJj:function(e,t,o){"use strict";o.r(t),o.d(t,"ReportModule",function(){return P});var i=o("tyNb"),a=o("3Pt+"),r=o("0IaG"),s=o("M9IT"),l=o("xdv0"),n=o("wwJg"),c=o("JX91"),d=o("lJxs"),u=o("fXoL"),b=o("r0g6"),m=o("tgey"),h=o("kmnG"),p=o("qFsG"),g=o("iadO"),f=o("/1cH"),v=o("ofXK"),w=o("bTqV"),S=o("hGDI"),y=o("FKr1"),C=o("dNgK"),x=o("d3UM");function D(e,t){if(1&e&&(u.ac(0,"mat-option",14),u.Uc(1),u.Zb()),2&e){const e=t.$implicit;u.vc("value",e),u.Hb(1),u.Wc(" ",e," ")}}const Z=function(){return[50,100,200,500]},k=".demo-full-width[_ngcontent-%COMP%] {\n        width: 100%;\n      }";let V=(()=>{class e{constructor(e,t,o,i,r){this.dialog=e,this.dialogx=t,this.userService=o,this.cdr=i,this.fb=r,this.notinusestartingDate=new Date(Date.now()+1728e5),this.notinuseendDate=new Date(Date.now()-864e5),this.startDate=new a.h(new Date),this.endDate=new a.h(new Date),this.columns=[{header:"ID",sortable:!0,field:"id"},{header:"Caller ID",sortable:!0,field:"caller_id_name"},{header:"Destination Number",sortable:!0,field:"destination_number"},{header:"Context",sortable:!0,field:"context"},{header:"Start Call",sortable:!0,field:"start_stamp"},{header:"Answer Stamp",sortable:!0,field:"answer_stamp"},{header:"End Call",sortable:!0,field:"end_stamp"},{header:"Duration",sortable:!0,field:"duration"},{header:"Bill",sortable:!0,field:"billsec"},{header:"Hangup Cause",sortable:!0,field:"hangup_cause"},{header:"Call Unique ID",sortable:!0,field:"uuid"},{header:"Date",sortable:!0,field:"created_time"},{header:"Actions",field:"action",minWidth:120,width:"120px",pinned:"right",type:"button",buttons:[{type:"icon",icon:"edit",tooltip:"edit",click:e=>this.openEditDstNumber(e)},{color:"warn",icon:"delete",text:"delete",tooltip:"delete",pop:!0,popTitle:"Confirm Delete",popCloseText:"Cancel",popOkText:"Delete",click:e=>this.delete(e)}]}],this.list=[],this.total=0,this.multiSelectable=!1,this.rowSelectable=!1,this.hideRowSelectionCheckbox=!1,this.showToolbar=!0,this.columnHideable=!0,this.columnMovable=!0,this.rowHover=!0,this.rowStriped=!0,this.showPaginator=!0,this.expandable=!0,this.columnResizable=!1,this.columnMenuButtonType="raised",this.myControl=new a.h,this.options=["1256","4894","4642","8462","8521"]}ngOnInit(){this.filteredOptions=this.myControl.valueChanges.pipe(Object(c.a)(""),Object(d.a)(e=>this._filter(e))),this.getallcdrreport(),this.searchform=this.fb.group({startdate:[new Date(Date.now())],enddate:[Date.now()],searchinput:[""]})}_filter(e){const t=e.toLowerCase();return this.options.filter(e=>e.toLowerCase().includes(t))}edit(e){this.dialogx.originalOpen(n.a,{width:"900px",data:{record:e}}).afterClosed().subscribe(()=>console.log("The dialog was closed"))}openEditDstNumber(e){this.dialog.open(O,{width:"500px",data:{record:e}}).afterClosed().subscribe(()=>{console.log("The edit dailog closed"),this.getallcdrreport()})}delete(e){this.userService.deletenumber(e._id).subscribe(t=>{console.log("%cips.component.ts line:248 response","color: #26bfa5;",t),this.isLoading=!1,this.getallcdrreport(),this.cdr.detectChanges(),this.dialogx.alert(`You have deleted ${e.dstnumber}!`)},e=>{console.log("%cerror ips.component.ts line:254 ","color: red; display: block; width: 100%;",e)})}openAddDstNumber(){this.dialog.open(U,{width:"500px"}).afterClosed().subscribe(()=>{this.getallcdrreport()})}changeSelect(e){console.log(e)}changeSort(e){console.log(e)}getallcdrreport(){this.userService.allcdrreport().subscribe(e=>{console.log("%cips.component.ts line:248 response","color: #26bfa5;",e),this.list=e.data,this.total=e.data.length,this.isLoading=!1,this.cdr.detectChanges()},e=>{console.log(e)})}ngAfterViewInit(){this.isLoading=!1}ngOnDestroy(){console.log("component destroyed")}submitsearch(){console.log(this.searchform.value)}}return e.\u0275fac=function(t){return new(t||e)(u.Ub(r.c),u.Ub(b.a),u.Ub(l.a),u.Ub(u.h),u.Ub(a.g))},e.\u0275cmp=u.Ob({type:e,selectors:[["app-cdr"]],viewQuery:function(e,t){if(1&e&&u.Yc(s.a,1),2&e){let e;u.Fc(e=u.jc())&&(t.paginator=e.first)}},decls:26,vars:32,consts:[[3,"formGroup","ngSubmit"],["matInput","","placeholder","Start Date","formControlName","startdate",3,"matDatepicker","max"],["matSuffix","",3,"for"],["picker1",""],["matInput","","placeholder","End Date","formControlName","enddate",3,"matDatepicker","min","max"],["picker2",""],[1,"m-r-8"],["type","text","placeholder","Pick one","aria-label","Number","matInput","",3,"formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary"],[1,"row"],[1,"col-lg-12"],[1,"mat-elevation-z8",3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","pageSize","sortChange","selectionChange"],[3,"value"]],template:function(e,t){if(1&e&&(u.Vb(0,"page-header"),u.ac(1,"section"),u.ac(2,"form",0),u.ic("ngSubmit",function(){return t.submitsearch()}),u.ac(3,"mat-form-field"),u.Vb(4,"input",1),u.Vb(5,"mat-datepicker-toggle",2),u.Vb(6,"mat-datepicker",null,3),u.Zb(),u.ac(8,"mat-form-field"),u.Vb(9,"input",4),u.Vb(10,"mat-datepicker-toggle",2),u.Vb(11,"mat-datepicker",null,5),u.Zb(),u.ac(13,"mat-form-field",6),u.ac(14,"mat-label"),u.Uc(15,"Number"),u.Zb(),u.Vb(16,"input",7),u.ac(17,"mat-autocomplete",null,8),u.Sc(19,D,2,2,"mat-option",9),u.nc(20,"async"),u.Zb(),u.Zb(),u.ac(21,"button",10),u.Uc(22,"Search"),u.Zb(),u.Zb(),u.ac(23,"div",11),u.ac(24,"div",12),u.ac(25,"mtx-grid",13),u.ic("sortChange",function(e){return t.changeSort(e)})("selectionChange",function(e){return t.changeSelect(e)}),u.Zb(),u.Zb(),u.Zb(),u.Zb()),2&e){const e=u.Gc(7),o=u.Gc(12),i=u.Gc(18);u.Hb(2),u.vc("formGroup",t.searchform),u.Hb(2),u.vc("matDatepicker",e)("max",t.notinuseendDate),u.Hb(1),u.vc("for",e),u.Hb(4),u.vc("matDatepicker",o)("max",t.notinuseendDate),u.Hb(1),u.vc("for",o),u.Hb(6),u.vc("formControl",t.myControl)("matAutocomplete",i),u.Hb(3),u.vc("ngForOf",u.oc(20,29,t.filteredOptions)),u.Hb(6),u.vc("data",t.list)("columns",t.columns)("loading",t.isLoading)("columnResizable",t.columnResizable)("multiSelectable",t.multiSelectable)("rowSelectable",t.rowSelectable)("hideRowSelectionCheckbox",t.hideRowSelectionCheckbox)("rowHover",t.rowHover)("rowStriped",t.rowStriped)("showToolbar",t.showToolbar)("toolbarTitle","CDR Reports")("columnHideable",t.columnHideable)("columnMovable",t.columnMovable)("expandable",t.expandable)("pageOnFront",t.showPaginator)("showPaginator",t.showPaginator)("pageSizeOptions",u.yc(31,Z))("pageIndex",0)("pageSize",50)}},directives:[m.a,a.z,a.s,a.l,h.c,p.b,a.d,g.c,a.r,a.j,g.f,h.j,g.b,h.g,f.c,a.i,f.a,v.o,w.b,S.a,y.o],pipes:[v.b],styles:[""],changeDetection:0}),e})(),U=(()=>{class e{constructor(e,t,o){this.fb=e,this.userService=t,this.snackBar=o,this.falseValue="false",this.trueValue="true",this.adddstnumber=this.fb.group({ip:["",[a.y.required]],dstnumber:["",[a.y.required,a.y.min(1e9),a.y.max(9999999999)]],inusestatus:[!1]})}ngOnInit(){this.getallips()}getErrorMessage(e){return e.get("dstnumber").hasError("required")?"validations.required":e.get("dstnumber").hasError("min")?"validations.min":e.get("dstnumber").hasError("max")?"validations.max":""}checkboxChange(e,t){e.value=t?this.trueValue:this.falseValue}submitdstnumber(){this.adddstnumber.valid?this.userService.adddstnumber(this.adddstnumber.value).subscribe(e=>{console.log("%cips.component.ts line:248 response","color: #26bfa5;",e),this.snackBar.open("DST Number Added Successfully!","",{duration:2e3}),this.adddstnumber.reset()},e=>{console.log("%cerror ips.component.ts line:254 ","color: red; display: block; width: 100%;",e)}):this.getErrorMessage(this.adddstnumber)}getallips(){this.userService.getallips().subscribe(e=>{console.log("%cips.component.ts line:248 response","color: #26bfa5;",e),this.allips=e.data},e=>{console.log("%cerror ips.component.ts line:254 ","color: red; display: block; width: 100%;",e)})}isFieldValid(e){return!this.adddstnumber.get(e).valid&&this.adddstnumber.get(e).touched}}return e.\u0275fac=function(t){return new(t||e)(u.Ub(a.g),u.Ub(l.a),u.Ub(C.a))},e.\u0275cmp=u.Ob({type:e,selectors:[["add-cdr-form"]],decls:46,vars:1,consts:[["mat-dialog-title",""],[1,"row"],[1,"col-lg-12"],[2,"width","100%"],["matInput","","placeholder","Plan Title","formControlName","","required",""],["matInput","","placeholder","Plan Price","formControlName","","required",""],["required","","formControlName","gender","required",""],["value","1"],["value","2"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","mat-dialog-close","","color","primary","cdkFocusInitial","","type","submit",3,"disabled"]],template:function(e,t){1&e&&(u.ac(0,"h2",0),u.Uc(1,"Price to Minute Plan"),u.Zb(),u.ac(2,"form"),u.ac(3,"mat-dialog-content"),u.ac(4,"div",1),u.ac(5,"div",2),u.ac(6,"mat-form-field",3),u.ac(7,"mat-label"),u.Uc(8,"Plan Title"),u.Zb(),u.Vb(9,"input",4),u.Vb(10,"mat-error"),u.Zb(),u.Zb(),u.ac(11,"div",2),u.ac(12,"mat-form-field",3),u.ac(13,"mat-label"),u.Uc(14,"Plan Price"),u.Zb(),u.Vb(15,"input",5),u.Vb(16,"mat-error"),u.Zb(),u.Zb(),u.ac(17,"div",2),u.ac(18,"mat-form-field",3),u.ac(19,"mat-label"),u.Uc(20,"Validity"),u.Zb(),u.ac(21,"mat-select",6),u.ac(22,"mat-option"),u.Uc(23,"-- None --"),u.Zb(),u.ac(24,"mat-option",7),u.Uc(25,"15 days"),u.Zb(),u.ac(26,"mat-option",8),u.Uc(27,"30 days"),u.Zb(),u.Zb(),u.Vb(28,"mat-error"),u.Zb(),u.Zb(),u.ac(29,"div",2),u.ac(30,"mat-form-field",3),u.ac(31,"mat-label"),u.Uc(32," Minute Balance"),u.Zb(),u.Vb(33,"input",5),u.Vb(34,"mat-error"),u.Zb(),u.Zb(),u.ac(35,"div",2),u.ac(36,"mat-form-field",3),u.ac(37,"mat-label"),u.Uc(38," Description"),u.Zb(),u.Vb(39,"input",5),u.Vb(40,"mat-error"),u.Zb(),u.Zb(),u.Zb(),u.Zb(),u.ac(41,"mat-dialog-actions"),u.ac(42,"button",9),u.Uc(43,"Cancel"),u.Zb(),u.ac(44,"button",10),u.Uc(45,"Submit"),u.Zb(),u.Zb(),u.Zb()),2&e&&(u.Hb(44),u.vc("disabled",t.adddstnumber.invalid))},directives:[r.j,a.z,a.s,a.t,r.g,h.c,h.g,p.b,a.d,a.r,a.j,a.x,h.b,x.a,y.o,r.d,w.b,r.e],styles:[k]}),e})(),O=(()=>{class e{constructor(e,t,o,i,r){this.fb=e,this.userService=t,this.snackBar=o,this.dialogRef=i,this.data=r,this.falseValue="false",this.trueValue="true",console.log(r),this.editdstnumber=this.fb.group({ip:["",[a.y.required]],dstnumber:["",[a.y.required,a.y.min(1e9),a.y.max(9999999999)]],inusestatus:[!1]})}ngOnInit(){var e,t,o,i,a,r,s,l,n,c,d;this.getallips(),this.editdstnumber.setValue({ip:(null===(t=null===(e=this.data)||void 0===e?void 0:e.record)||void 0===t?void 0:t.ip)?null===(a=null===(i=null===(o=this.data)||void 0===o?void 0:o.record)||void 0===i?void 0:i.ip)||void 0===a?void 0:a._id:"null",dstnumber:(null===(s=null===(r=this.data)||void 0===r?void 0:r.record)||void 0===s?void 0:s.dstnumber)?null===(n=null===(l=this.data)||void 0===l?void 0:l.record)||void 0===n?void 0:n.dstnumber:"null",inusestatus:!!(null===(d=null===(c=this.data)||void 0===c?void 0:c.record)||void 0===d?void 0:d.inusestatus)})}getErrorMessage(e){return e.get("dstnumber").hasError("required")?"validations.required":e.get("dstnumber").hasError("min")?"validations.min":e.get("dstnumber").hasError("max")?"validations.max":""}getallips(){this.userService.getallips().subscribe(e=>{console.log("%cips.component.ts line:248 response","color: #26bfa5;",e),this.allips=e.data},e=>{console.log("%cerror ips.component.ts line:254 ","color: red; display: block; width: 100%;",e)})}checkboxChange(e,t){e.value=t?this.trueValue:this.falseValue}isFieldValid(e){return!this.editdstnumber.get(e).valid&&this.editdstnumber.get(e).touched}submitdstnumber(){console.log(this.editdstnumber.value),this.editdstnumber.valid?this.userService.editdstnumber(this.data.record._id,this.editdstnumber.value).subscribe(e=>{console.log("%cips.component.ts line:248 response","color: #26bfa5;",e),this.snackBar.open("IP Edited Successfully!","",{duration:2e3}),this.editdstnumber.reset()},e=>{console.log("%cerror ips.component.ts line:254 ","color: red; display: block; width: 100%;",e)}):this.getErrorMessage(this.editdstnumber)}}return e.\u0275fac=function(t){return new(t||e)(u.Ub(a.g),u.Ub(l.a),u.Ub(C.a),u.Ub(r.i),u.Ub(r.a))},e.\u0275cmp=u.Ob({type:e,selectors:[["edit-cdr-form"]],decls:0,vars:0,template:function(e,t){},styles:[k]}),e})();const H=[{path:"cdr",component:V}];let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Sb({type:e}),e.\u0275inj=u.Rb({imports:[[i.j.forChild(H)],i.j]}),e})();var M=o("M0ag");let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Sb({type:e}),e.\u0275inj=u.Rb({imports:[[M.c,I]]}),e})()}}]);